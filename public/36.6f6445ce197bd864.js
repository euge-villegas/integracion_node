"use strict";(self.webpackChunkrecipes_app=self.webpackChunkrecipes_app||[]).push([[36],{1036:(j,h,p)=>{p.r(h),p.d(h,{RecipesModule:()=>L});var c=p(4006),s=p(3060),Z=p(4466),_=p(5698),T=p(4004),e=p(4650),x=p(5599);let A=(()=>{class t{constructor(i,n){this.authService=i,this.router=n}canActivate(i,n){return this.authService.user.pipe((0,_.q)(1),(0,T.U)(o=>!!o||this.router.createUrlTree(["/auth"])))}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(x.e),e.LFG(s.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=p(5496),u=p(6895),a=p(3546),g=p(1561),y=p(7392),f=p(4859);function S(t,r){if(1&t&&(e.TgZ(0,"mat-card-content"),e._uU(1),e.qZA()),2&t){const i=r.$implicit;e.xp6(1),e.AsE(" ",i.name," - ",i.amount," ")}}let w=(()=>{class t{constructor(i,n,o){this.recipeService=i,this.route=n,this.router=o}ngOnInit(){this.route.params.subscribe(i=>{this.id=+i.id,this.recipe=this.recipeService.getRecipe(this.id)})}onAddToShoppingList(){this.recipeService.addIngredientsToShoppingList(this.recipe.ingredients)}onEdit(){this.router.navigate(["edit"],{relativeTo:this.route})}onDeleteRecipe(){this.recipeService.deleteRecipe(this.id),this.router.navigate(["/recipes"])}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(m.j),e.Y36(s.gz),e.Y36(s.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-detail"]],decls:24,vars:6,consts:[[1,"mat-card"],[1,"mat-card-menu"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item",""],[1,"recipe-menu-link",2,"cursor","pointer",3,"click"],["mat-card-image","",3,"src","alt"],[4,"ngFor","ngForOf"]],template:function(i,n){if(1&i&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"mat-card-title"),e._uU(3),e.qZA(),e.TgZ(4,"button",2)(5,"mat-icon"),e._uU(6,"more_vert"),e.qZA()(),e.TgZ(7,"mat-menu",null,3)(9,"button",4)(10,"a",5),e.NdJ("click",function(){return n.onAddToShoppingList()}),e._uU(11,"Add To Basket"),e.qZA()(),e.TgZ(12,"button",4)(13,"a",5),e.NdJ("click",function(){return n.onEdit()}),e._uU(14,"Edit Recipe"),e.qZA()(),e.TgZ(15,"button",4)(16,"a",5),e.NdJ("click",function(){return n.onDeleteRecipe()}),e._uU(17,"Delete Recipe"),e.qZA()()()(),e._UZ(18,"img",6)(19,"hr"),e.TgZ(20,"mat-card-content"),e._uU(21),e.qZA(),e.TgZ(22,"mat-card"),e.YNc(23,S,2,2,"mat-card-content",7),e.qZA()()),2&i){const o=e.MAs(8);e.xp6(3),e.hij(" ",n.recipe.name," "),e.xp6(1),e.Q6J("matMenuTriggerFor",o),e.xp6(14),e.s9C("alt",n.recipe.name),e.Q6J("src",n.recipe.imagePath,e.LSH),e.xp6(3),e.hij(" ",n.recipe.description," "),e.xp6(2),e.Q6J("ngForOf",n.recipe.ingredients)}},dependencies:[u.sg,a.a8,a.dn,a.n5,a.G2,g.VK,g.OP,g.p6,y.Hw,f.lW],styles:["*[_ngcontent-%COMP%]{max-width:500px}.mat-card[_ngcontent-%COMP%]{max-width:450px}.mat-card-menu[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.recipe-menu-link[_ngcontent-%COMP%]{text-decoration:none}"]}),t})();function F(t,r){if(1&t){const i=e.EpF();e.TgZ(0,"div",18)(1,"div",19),e._UZ(2,"input",20),e.qZA(),e.TgZ(3,"div",21),e._UZ(4,"input",22),e.qZA(),e.TgZ(5,"div",21)(6,"button",5),e.NdJ("click",function(){const d=e.CHM(i).index,l=e.oxw();return e.KtG(l.onDeleteIngredient(d))}),e._uU(7," X "),e.qZA()()()}2&t&&e.Q6J("formGroupName",r.index)}let v=(()=>{class t{constructor(i,n,o){this.route=i,this.recipeService=n,this.router=o,this.editMode=!1}ngOnInit(){this.route.params.subscribe(i=>{this.id=+i.id,this.editMode=null!=i.id,this.initForm()})}get controls(){return this.recipeForm.get("ingredients").controls}onSubmit(){this.editMode?this.recipeService.updateRecipe(this.id,this.recipeForm.value):this.recipeService.addRecipe(this.recipeForm.value),this.onCancel()}onAddIngredient(){this.recipeForm.get("ingredients").push(new c.cw({name:new c.NI(null,c.kI.required),amount:new c.NI(null,[c.kI.required])}))}onDeleteIngredient(i){this.recipeForm.get("ingredients").removeAt(i)}onCancel(){this.router.navigate(["../"],{relativeTo:this.route})}initForm(){let i="",n="",o="",d=new c.Oe([]);if(this.editMode){const l=this.recipeService.getRecipe(this.id);if(i=l.name,n=l.imagePath,o=l.description,l.ingredients)for(let R of l.ingredients)d.push(new c.cw({name:new c.NI(R.name,c.kI.required),amount:new c.NI(R.amount,[c.kI.required,c.kI.pattern(/^[1-9]+[0-9]*$/)])}))}this.recipeForm=new c.cw({name:new c.NI(i,c.kI.required),imagePath:new c.NI(n,c.kI.required),description:new c.NI(o,c.kI.required),ingredients:d})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(s.gz),e.Y36(m.j),e.Y36(s.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-edit"]],decls:41,vars:4,consts:[[1,"row","edit-component"],[1,"col-xs-12"],[3,"formGroup","ngSubmit"],[1,"row"],["type","submit",1,"btn","btn-success",2,"margin","10px",3,"disabled"],["type","button",1,"btn","btn-danger",3,"click"],[1,"form-group"],["for","name"],["type","text","name","name","id","name","formControlName","name",1,"form-control"],["for","imagePath"],["type","text","id","imagePath","formControlName","imagePath",1,"form-control"],["imagePath",""],["alt","",1,"img-responsive",3,"src"],["for","description"],["type","text","id","description","formControlName","description","rows","6",1,"form-control"],["formArrayName","ingredients",1,"col-xs-12"],["class","row","style","margin-top: 10px;",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success",3,"click"],[1,"row",2,"margin-top","10px",3,"formGroupName"],[1,"col-xs-8"],["type","text","formControlName","name",1,"form-control"],[1,"col-xs-2"],["type","number","formControlName","amount",1,"form-control"]],template:function(i,n){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(3,"div",3)(4,"div",1)(5,"button",4),e._uU(6," Save "),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return n.onCancel()}),e._uU(8," Cancel "),e.qZA()()(),e.TgZ(9,"div",3)(10,"div",1)(11,"div",6)(12,"label",7),e._uU(13,"Name"),e.qZA(),e._UZ(14,"input",8),e.qZA()()(),e.TgZ(15,"div",3)(16,"div",1)(17,"div",6)(18,"label",9),e._uU(19,"Image URL"),e.qZA(),e._UZ(20,"input",10,11),e.qZA()()(),e.TgZ(22,"div",3)(23,"div",1)(24,"div",6),e._UZ(25,"img",12),e.qZA()()(),e.TgZ(26,"div",3)(27,"div",1)(28,"div",6)(29,"label",13),e._uU(30,"Description"),e.qZA(),e.TgZ(31,"textarea",14),e._uU(32,"                        "),e.qZA()()()(),e.TgZ(33,"div",3)(34,"div",15),e.YNc(35,F,8,1,"div",16),e._UZ(36,"hr"),e.TgZ(37,"div",3)(38,"div",1)(39,"button",17),e.NdJ("click",function(){return n.onAddIngredient()}),e._uU(40," Add Ingredients "),e.qZA()()()()()()()()),2&i){const o=e.MAs(21);e.xp6(2),e.Q6J("formGroup",n.recipeForm),e.xp6(3),e.Q6J("disabled",!n.recipeForm.valid),e.xp6(20),e.Q6J("src",o.value,e.LSH),e.xp6(10),e.Q6J("ngForOf",n.controls)}},dependencies:[u.sg,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,c.x0,c.CE],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%], textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid red}.edit-component[_ngcontent-%COMP%]{width:550px}"]}),t})(),b=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-start"]],decls:2,vars:0,template:function(i,n){1&i&&(e.TgZ(0,"h3"),e._uU(1,"Please select a Recipe!"),e.qZA())}}),t})();var I=p(3649);let C=(()=>{class t{constructor(i,n){this.dataStorageService=i,this.recipeService=n}resolve(i,n){const o=this.recipeService.getRecipes();return 0===o.length?this.dataStorageService.fetchRecipes():o}}return t.\u0275fac=function(i){return new(i||t)(e.LFG(I.Z),e.LFG(m.j))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var O=p(1646);const U=function(t){return[t]};let M=(()=>{class t{ngOnInit(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-item"]],inputs:{recipe:"recipe",index:"index"},decls:6,vars:6,consts:[["routerLinkActive","active",1,"list-group-item","clearfix",2,"cursor","pointer",3,"routerLink"],[1,"recipe-card"],["mat-card-image","",1,"recipe-card-img",3,"src","alt"]],template:function(i,n){1&i&&(e.TgZ(0,"a",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),e._uU(4),e.qZA()(),e._UZ(5,"img",2),e.qZA()()),2&i&&(e.Q6J("routerLink",e.VKq(4,U,n.index)),e.xp6(4),e.hij(" ",n.recipe.name," "),e.xp6(1),e.s9C("alt",n.recipe.name),e.Q6J("src",n.recipe.imagePath,e.LSH))},dependencies:[s.yS,s.Od,a.a8,a.dk,a.n5,a.G2],styles:[".recipe-card[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-content:center;justify-content:center}.recipe-card-img[_ngcontent-%COMP%]{object-fit:cover;height:150px;width:100%;margin:0;padding:0}a[_ngcontent-%COMP%]{border:none;max-width:250px}"]}),t})();function N(t,r){if(1&t&&e._UZ(0,"app-recipe-item",6),2&t){const n=r.index;e.Q6J("recipe",r.$implicit)("index",n)}}let P=(()=>{class t{constructor(i,n,o){this.recipeService=i,this.router=n,this.route=o,this.recipes=[],this.pageSlice=this.recipes.slice(0,3)}ngOnInit(){this.subscription=this.recipeService.recipesChanged.subscribe(i=>{this.recipes=i}),this.recipes=this.recipeService.getRecipes()}onNewRecipe(){this.router.navigate(["new"],{relativeTo:this.route})}OnPageChange(i){const n=i.pageIndex*i.pageSize;let o=n+i.pageSize;o>this.recipes.length&&(o=this.recipes.length),this.pageSlice=this.recipes.slice(n,o)}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(m.j),e.Y36(s.F0),e.Y36(s.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipe-list"]],decls:12,vars:3,consts:[[1,"recipe-list-title"],["mat-stroked-button","",3,"click"],[1,"recipe-item-sect"],[1,"recipe-item"],[3,"recipe","index",4,"ngFor","ngForOf"],["aria-label","Select page",3,"length","pageSize","click"],[3,"recipe","index"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2,"Our Recipes"),e.qZA(),e.TgZ(3,"button",1),e.NdJ("click",function(){return n.onNewRecipe()}),e._uU(4," New Recipe "),e.qZA()(),e._UZ(5,"hr"),e.TgZ(6,"div",2)(7,"div",3),e.YNc(8,N,1,2,"app-recipe-item",4),e._UZ(9,"br"),e.qZA(),e.TgZ(10,"div")(11,"mat-paginator",5),e.NdJ("click",function(d){return n.OnPageChange(d)}),e.qZA()()()),2&i&&(e.xp6(8),e.Q6J("ngForOf",n.recipes),e.xp6(3),e.Q6J("length",n.recipes.length)("pageSize",3))},dependencies:[u.sg,f.lW,O.NW,M],styles:[".recipe-item-sect[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.recipe-item[_ngcontent-%COMP%]{width:600px;display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;justify-content:center}.recipe-list-title[_ngcontent-%COMP%]{width:600px;display:flex;flex-direction:row;justify-content:space-between;align-items:center;align-content:center}h2[_ngcontent-%COMP%]{margin-top:15px}"]}),t})();const k=[{path:"",component:(()=>{class t{constructor(){}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-recipes"]],decls:3,vars:0,template:function(i,n){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-recipe-list")(2,"router-outlet"),e.qZA())},dependencies:[s.lC,P],styles:["div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}app-recipe-list[_ngcontent-%COMP%]{max-width:65%}router-outlet[_ngcontent-%COMP%]{max-width:33%}"]}),t})(),canActivate:[A],children:[{path:"",component:b},{path:"new",component:v},{path:":id",component:w,resolve:[C]},{path:":id/edit",component:v,resolve:[C]}]}];let J=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[s.Bz.forChild(k),s.Bz]}),t})();var q=p(898);let L=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[Z.m,c.UX,J,s.Bz,q.q]}),t})()}}]);